import{c as Oe,p as g,r as d,R as Ar,a as x,j as f,b as ke,B as he,I as Er}from"./index-b60d8d4e.js";import{u as Fr}from"./request-e00f1a04.js";var Or=Oe("cloud-filled","IconCloudFilled",[["path",{d:"M10.04 4.305c2.195 -.667 4.615 -.224 6.36 1.176c1.386 1.108 2.188 2.686 2.252 4.34l.003 .212l.091 .003c2.3 .107 4.143 1.961 4.25 4.27l.004 .211c0 2.407 -1.885 4.372 -4.255 4.482l-.21 .005h-11.878l-.222 -.008c-2.94 -.11 -5.317 -2.399 -5.43 -5.263l-.005 -.216c0 -2.747 2.08 -5.01 4.784 -5.417l.114 -.016l.07 -.181c.663 -1.62 2.056 -2.906 3.829 -3.518l.244 -.08z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]),kr=Oe("server-cog","IconServerCog",[["path",{d:"M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M12 20h-6a3 3 0 0 1 -3 -3v-2a3 3 0 0 1 3 -3h10.5",key:"svg-1"}],["path",{d:"M18 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M18 14.5v1.5",key:"svg-3"}],["path",{d:"M18 20v1.5",key:"svg-4"}],["path",{d:"M21.032 16.25l-1.299 .75",key:"svg-5"}],["path",{d:"M16.27 19l-1.3 .75",key:"svg-6"}],["path",{d:"M14.97 16.25l1.3 .75",key:"svg-7"}],["path",{d:"M19.733 19l1.3 .75",key:"svg-8"}],["path",{d:"M7 8v.01",key:"svg-9"}],["path",{d:"M7 16v.01",key:"svg-10"}]]),or=Oe("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function $(e,r,t,n){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function l(y){try{u(n.next(y))}catch(p){c(p)}}function m(y){try{u(n.throw(y))}catch(p){c(p)}}function u(y){y.done?o(y.value):i(y.value).then(l,m)}u((n=n.apply(e,r||[])).next())})}function U(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(y){return m([u,y])}}function m(u){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(y){u=[6,y],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function He(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],c;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return o}function We(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))}var Cr=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function G(e,r){var t=jr(e);if(typeof t.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof r=="string"?r:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}function jr(e){var r=e.name,t=r&&r.lastIndexOf(".")!==-1;if(t&&!e.type){var n=r.split(".").pop().toLowerCase(),i=Cr.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var _r=[".DS_Store","Thumbs.db"];function Sr(e){return $(this,void 0,void 0,function(){return U(this,function(r){return te(e)&&Ir(e.dataTransfer)?[2,Mr(e.dataTransfer,e.type)]:Pr(e)?[2,Tr(e)]:Array.isArray(e)&&e.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Rr(e)]:[2,[]]})})}function Ir(e){return te(e)}function Pr(e){return te(e)&&te(e.target)}function te(e){return typeof e=="object"&&e!==null}function Tr(e){return De(e.target.files).map(function(r){return G(r)})}function Rr(e){return $(this,void 0,void 0,function(){var r;return U(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return r=t.sent(),[2,r.map(function(n){return G(n)})]}})})}function Mr(e,r){return $(this,void 0,void 0,function(){var t,n;return U(this,function(i){switch(i.label){case 0:return e.items?(t=De(e.items).filter(function(o){return o.kind==="file"}),r!=="drop"?[2,t]:[4,Promise.all(t.map(zr))]):[3,2];case 1:return n=i.sent(),[2,Ge(ir(n))];case 2:return[2,Ge(De(e.files).map(function(o){return G(o)}))]}})})}function Ge(e){return e.filter(function(r){return _r.indexOf(r.name)===-1})}function De(e){if(e===null)return[];for(var r=[],t=0;t<e.length;t++){var n=e[t];r.push(n)}return r}function zr(e){if(typeof e.webkitGetAsEntry!="function")return Ye(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?ar(r):Ye(e)}function ir(e){return e.reduce(function(r,t){return We(We([],He(r),!1),He(Array.isArray(t)?ir(t):[t]),!1)},[])}function Ye(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var t=G(r);return Promise.resolve(t)}function Nr(e){return $(this,void 0,void 0,function(){return U(this,function(r){return[2,e.isDirectory?ar(e):Lr(e)]})})}function ar(e){var r=e.createReader();return new Promise(function(t,n){var i=[];function o(){var c=this;r.readEntries(function(l){return $(c,void 0,void 0,function(){var m,u,y;return U(this,function(p){switch(p.label){case 0:if(l.length)return[3,5];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return m=p.sent(),t(m),[3,4];case 3:return u=p.sent(),n(u),[3,4];case 4:return[3,6];case 5:y=Promise.all(l.map(Nr)),i.push(y),o(),p.label=6;case 6:return[2]}})})},function(l){n(l)})}o()})}function Lr(e){return $(this,void 0,void 0,function(){return U(this,function(r){return[2,new Promise(function(t,n){e.file(function(i){var o=G(i,e.fullPath);t(o)},function(i){n(i)})})]})})}var $r=function(e,r){if(e&&r){var t=Array.isArray(r)?r:r.split(","),n=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return t.some(function(c){var l=c.trim().toLowerCase();return l.charAt(0)==="."?n.toLowerCase().endsWith(l):l.endsWith("/*")?o===l.replace(/\/.*$/,""):i===l})}return!0};function Ve(e){return Kr(e)||Br(e)||lr(e)||Ur()}function Ur(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Br(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kr(e){if(Array.isArray(e))return xe(e)}function Xe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function qe(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Xe(Object(t),!0).forEach(function(n){cr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function cr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function W(e,r){return Gr(e)||Wr(e,r)||lr(e,r)||Hr()}function Hr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lr(e,r){if(e){if(typeof e=="string")return xe(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xe(e,r)}}function xe(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Wr(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],i=!0,o=!1,c,l;try{for(t=t.call(e);!(i=(c=t.next()).done)&&(n.push(c.value),!(r&&n.length===r));i=!0);}catch(m){o=!0,l=m}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw l}}return n}}function Gr(e){if(Array.isArray(e))return e}var Yr="file-invalid-type",Vr="file-too-large",Xr="file-too-small",qr="too-many-files",Zr=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var t=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:Yr,message:"File type must be ".concat(t)}},Ze=function(r){return{code:Vr,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},Je=function(r){return{code:Xr,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},Jr={code:qr,message:"Too many files"};function sr(e,r){var t=e.type==="application/x-moz-file"||$r(e,r);return[t,t?null:Zr(r)]}function ur(e,r,t){if(T(e.size))if(T(r)&&T(t)){if(e.size>t)return[!1,Ze(t)];if(e.size<r)return[!1,Je(r)]}else{if(T(r)&&e.size<r)return[!1,Je(r)];if(T(t)&&e.size>t)return[!1,Ze(t)]}return[!0,null]}function T(e){return e!=null}function Qr(e){var r=e.files,t=e.accept,n=e.minSize,i=e.maxSize,o=e.multiple,c=e.maxFiles,l=e.validator;return!o&&r.length>1||o&&c>=1&&r.length>c?!1:r.every(function(m){var u=sr(m,t),y=W(u,1),p=y[0],E=ur(m,n,i),k=W(E,1),A=k[0],_=l?l(m):null;return p&&A&&!_})}function ne(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function ee(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Qe(e){e.preventDefault()}function et(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function rt(e){return e.indexOf("Edge/")!==-1}function tt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return et(e)||rt(e)}function j(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),c=1;c<i;c++)o[c-1]=arguments[c];return r.some(function(l){return!ne(n)&&l&&l.apply(void 0,[n].concat(o)),ne(n)})}}function nt(){return"showOpenFilePicker"in window}function ot(e){if(T(e)){var r=Object.entries(e).filter(function(t){var n=W(t,2),i=n[0],o=n[1],c=!0;return fr(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(o)||!o.every(pr))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(t,n){var i=W(n,2),o=i[0],c=i[1];return qe(qe({},t),{},cr({},o,c))},{});return[{description:"Files",accept:r}]}return e}function it(e){if(T(e))return Object.entries(e).reduce(function(r,t){var n=W(t,2),i=n[0],o=n[1];return[].concat(Ve(r),[i],Ve(o))},[]).filter(function(r){return fr(r)||pr(r)}).join(",")}function at(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function ct(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function fr(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function pr(e){return/^.*\.[\w]+$/.test(e)}var lt=["children"],st=["open"],ut=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ft=["refKey","onChange","onClick"];function pt(e){return gt(e)||mt(e)||dr(e)||dt()}function dt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gt(e){if(Array.isArray(e))return Ae(e)}function be(e,r){return ht(e)||yt(e,r)||dr(e,r)||vt()}function vt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dr(e,r){if(e){if(typeof e=="string")return Ae(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ae(e,r)}}function Ae(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function yt(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],i=!0,o=!1,c,l;try{for(t=t.call(e);!(i=(c=t.next()).done)&&(n.push(c.value),!(r&&n.length===r));i=!0);}catch(m){o=!0,l=m}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw l}}return n}}function ht(e){if(Array.isArray(e))return e}function er(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?er(Object(t),!0).forEach(function(n){Ee(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):er(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ee(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function oe(e,r){if(e==null)return{};var t=bt(e,r),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function bt(e,r){if(e==null)return{};var t={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(r.indexOf(i)>=0)&&(t[i]=e[i]);return t}var Ce=d.forwardRef(function(e,r){var t=e.children,n=oe(e,lt),i=gr(n),o=i.open,c=oe(i,st);return d.useImperativeHandle(r,function(){return{open:o}},[o]),Ar.createElement(d.Fragment,null,t(v(v({},c),{},{open:o})))});Ce.displayName="Dropzone";var mr={disabled:!1,getFilesFromEvent:Sr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Ce.defaultProps=mr;Ce.propTypes={children:g.func,accept:g.objectOf(g.arrayOf(g.string)),multiple:g.bool,preventDropOnDocument:g.bool,noClick:g.bool,noKeyboard:g.bool,noDrag:g.bool,noDragEventsBubbling:g.bool,minSize:g.number,maxSize:g.number,maxFiles:g.number,disabled:g.bool,getFilesFromEvent:g.func,onFileDialogCancel:g.func,onFileDialogOpen:g.func,useFsAccessApi:g.bool,autoFocus:g.bool,onDragEnter:g.func,onDragLeave:g.func,onDragOver:g.func,onDrop:g.func,onDropAccepted:g.func,onDropRejected:g.func,onError:g.func,validator:g.func};var Fe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function gr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=v(v({},mr),e),t=r.accept,n=r.disabled,i=r.getFilesFromEvent,o=r.maxSize,c=r.minSize,l=r.multiple,m=r.maxFiles,u=r.onDragEnter,y=r.onDragLeave,p=r.onDragOver,E=r.onDrop,k=r.onDropAccepted,A=r.onDropRejected,_=r.onFileDialogCancel,S=r.onFileDialogOpen,R=r.useFsAccessApi,je=r.autoFocus,ie=r.preventDropOnDocument,_e=r.noClick,ae=r.noKeyboard,Se=r.noDrag,I=r.noDragEventsBubbling,ce=r.onError,B=r.validator,K=d.useMemo(function(){return it(t)},[t]),Ie=d.useMemo(function(){return ot(t)},[t]),le=d.useMemo(function(){return typeof S=="function"?S:rr},[S]),Y=d.useMemo(function(){return typeof _=="function"?_:rr},[_]),D=d.useRef(null),C=d.useRef(null),yr=d.useReducer(wt,Fe),Pe=be(yr,2),se=Pe[0],F=Pe[1],hr=se.isFocused,Te=se.isFileDialogActive,V=d.useRef(typeof window<"u"&&window.isSecureContext&&R&&nt()),Re=function(){!V.current&&Te&&setTimeout(function(){if(C.current){var s=C.current.files;s.length||(F({type:"closeDialog"}),Y())}},300)};d.useEffect(function(){return window.addEventListener("focus",Re,!1),function(){window.removeEventListener("focus",Re,!1)}},[C,Te,Y,V]);var M=d.useRef([]),Me=function(s){D.current&&D.current.contains(s.target)||(s.preventDefault(),M.current=[])};d.useEffect(function(){return ie&&(document.addEventListener("dragover",Qe,!1),document.addEventListener("drop",Me,!1)),function(){ie&&(document.removeEventListener("dragover",Qe),document.removeEventListener("drop",Me))}},[D,ie]),d.useEffect(function(){return!n&&je&&D.current&&D.current.focus(),function(){}},[D,je,n]);var P=d.useCallback(function(a){ce?ce(a):console.error(a)},[ce]),ze=d.useCallback(function(a){a.preventDefault(),a.persist(),J(a),M.current=[].concat(pt(M.current),[a.target]),ee(a)&&Promise.resolve(i(a)).then(function(s){if(!(ne(a)&&!I)){var h=s.length,b=h>0&&Qr({files:s,accept:K,minSize:c,maxSize:o,multiple:l,maxFiles:m,validator:B}),O=h>0&&!b;F({isDragAccept:b,isDragReject:O,isDragActive:!0,type:"setDraggedFiles"}),u&&u(a)}}).catch(function(s){return P(s)})},[i,u,P,I,K,c,o,l,m,B]),Ne=d.useCallback(function(a){a.preventDefault(),a.persist(),J(a);var s=ee(a);if(s&&a.dataTransfer)try{a.dataTransfer.dropEffect="copy"}catch{}return s&&p&&p(a),!1},[p,I]),Le=d.useCallback(function(a){a.preventDefault(),a.persist(),J(a);var s=M.current.filter(function(b){return D.current&&D.current.contains(b)}),h=s.indexOf(a.target);h!==-1&&s.splice(h,1),M.current=s,!(s.length>0)&&(F({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ee(a)&&y&&y(a))},[D,y,I]),X=d.useCallback(function(a,s){var h=[],b=[];a.forEach(function(O){var H=sr(O,K),L=be(H,2),fe=L[0],pe=L[1],de=ur(O,c,o),Q=be(de,2),me=Q[0],ge=Q[1],ve=B?B(O):null;if(fe&&me&&!ve)h.push(O);else{var ye=[pe,ge];ve&&(ye=ye.concat(ve)),b.push({file:O,errors:ye.filter(function(xr){return xr})})}}),(!l&&h.length>1||l&&m>=1&&h.length>m)&&(h.forEach(function(O){b.push({file:O,errors:[Jr]})}),h.splice(0)),F({acceptedFiles:h,fileRejections:b,type:"setFiles"}),E&&E(h,b,s),b.length>0&&A&&A(b,s),h.length>0&&k&&k(h,s)},[F,l,K,c,o,m,E,k,A,B]),q=d.useCallback(function(a){a.preventDefault(),a.persist(),J(a),M.current=[],ee(a)&&Promise.resolve(i(a)).then(function(s){ne(a)&&!I||X(s,a)}).catch(function(s){return P(s)}),F({type:"reset"})},[i,X,P,I]),z=d.useCallback(function(){if(V.current){F({type:"openDialog"}),le();var a={multiple:l,types:Ie};window.showOpenFilePicker(a).then(function(s){return i(s)}).then(function(s){X(s,null),F({type:"closeDialog"})}).catch(function(s){at(s)?(Y(s),F({type:"closeDialog"})):ct(s)?(V.current=!1,C.current?(C.current.value=null,C.current.click()):P(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):P(s)});return}C.current&&(F({type:"openDialog"}),le(),C.current.value=null,C.current.click())},[F,le,Y,R,X,P,Ie,l]),$e=d.useCallback(function(a){!D.current||!D.current.isEqualNode(a.target)||(a.key===" "||a.key==="Enter"||a.keyCode===32||a.keyCode===13)&&(a.preventDefault(),z())},[D,z]),Ue=d.useCallback(function(){F({type:"focus"})},[]),Be=d.useCallback(function(){F({type:"blur"})},[]),Ke=d.useCallback(function(){_e||(tt()?setTimeout(z,0):z())},[_e,z]),N=function(s){return n?null:s},ue=function(s){return ae?null:N(s)},Z=function(s){return Se?null:N(s)},J=function(s){I&&s.stopPropagation()},br=d.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=a.refKey,h=s===void 0?"ref":s,b=a.role,O=a.onKeyDown,H=a.onFocus,L=a.onBlur,fe=a.onClick,pe=a.onDragEnter,de=a.onDragOver,Q=a.onDragLeave,me=a.onDrop,ge=oe(a,ut);return v(v(Ee({onKeyDown:ue(j(O,$e)),onFocus:ue(j(H,Ue)),onBlur:ue(j(L,Be)),onClick:N(j(fe,Ke)),onDragEnter:Z(j(pe,ze)),onDragOver:Z(j(de,Ne)),onDragLeave:Z(j(Q,Le)),onDrop:Z(j(me,q)),role:typeof b=="string"&&b!==""?b:"presentation"},h,D),!n&&!ae?{tabIndex:0}:{}),ge)}},[D,$e,Ue,Be,Ke,ze,Ne,Le,q,ae,Se,n]),wr=d.useCallback(function(a){a.stopPropagation()},[]),Dr=d.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=a.refKey,h=s===void 0?"ref":s,b=a.onChange,O=a.onClick,H=oe(a,ft),L=Ee({accept:K,multiple:l,type:"file",style:{display:"none"},onChange:N(j(b,q)),onClick:N(j(O,wr)),tabIndex:-1},h,C);return v(v({},L),H)}},[C,t,l,q,n]);return v(v({},se),{},{isFocused:hr&&!n,getRootProps:br,getInputProps:Dr,rootRef:D,inputRef:C,open:N(z)})}function wt(e,r){switch(r.type){case"focus":return v(v({},e),{},{isFocused:!0});case"blur":return v(v({},e),{},{isFocused:!1});case"openDialog":return v(v({},Fe),{},{isFileDialogActive:!0});case"closeDialog":return v(v({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return v(v({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return v(v({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return v({},Fe);default:return e}}function rr(){}let re;const Dt=new Uint8Array(16);function xt(){if(!re&&(re=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!re))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return re(Dt)}const w=[];for(let e=0;e<256;++e)w.push((e+256).toString(16).slice(1));function At(e,r=0){return(w[e[r+0]]+w[e[r+1]]+w[e[r+2]]+w[e[r+3]]+"-"+w[e[r+4]]+w[e[r+5]]+"-"+w[e[r+6]]+w[e[r+7]]+"-"+w[e[r+8]]+w[e[r+9]]+"-"+w[e[r+10]]+w[e[r+11]]+w[e[r+12]]+w[e[r+13]]+w[e[r+14]]+w[e[r+15]]).toLowerCase()}const Et=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),tr={randomUUID:Et};function Ft(e,r,t){if(tr.randomUUID&&!r&&!e)return tr.randomUUID();e=e||{};const n=e.random||(e.rng||xt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return At(n)}function vr(e=0){if(!e)return"0 Bytes";const r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],t=Math.floor(Math.log(e)/Math.log(1024));return(e/1024**t).toFixed(2)+" "+r[t]}const Ot=({uploadFile:e,onRemove:r,onUpload:t,onClick:n})=>{const{file:i,preview:o,status:c,percent:l}=e,m=()=>c==="success"||c==="error"?100:c==="waiting"?0:l||0;return x("div",{style:{backgroundColor:"var(--tblr-body-bg)"},className:"tw-cursor-pointer tw-p-2 tw-mb-2 last:tw-mb-0 tw-rounded-md tw-relative tw-bg-gray-50 tw-overflow-hidden",onClick:n,children:[f("div",{className:ke("tw-absolute tw-w-full tw-h-full tw-left-0 tw-top-0 bg-lime-lt",{"bg-lime-lt":["success","uploading"].includes(c),"bg-pink-lt":c==="error"}),style:{width:`${m()}%`}}),x("div",{className:"tw-relative tw-flex tw-items-center tw-gap-3",children:[f("span",{className:"avatar tw-overflow-hidden",children:f("img",{className:"tw-w-full tw-h-full tw-object-cover",src:o,onLoad:()=>URL.revokeObjectURL(o)})}),x("div",{className:"tw-flex-1 text-truncate",children:[f("div",{className:"text-reset d-block",children:i.name}),x("div",{className:"d-block text-muted text-truncate mt-n1",children:[vr(i.size),", ",c==="waiting"&&"等待上传",c==="success"&&f("span",{className:"text-lime",children:"上传成功"}),c==="error"&&f("span",{className:"text-pink",children:"上传失败"})]})]}),c==="waiting"&&f(he,{shape:"round",className:"btn-icon",children:f(kr,{size:16})}),c==="waiting"&&f(he,{shape:"round",className:"btn-icon",onClick:()=>t(e.uid),children:f(Er,{size:16})}),f(he,{shape:"round",className:"btn-icon",onClick:()=>r(e.uid),children:f(or,{size:16})})]})]})},we=[{name:"URL",format:e=>e.url},{name:"Markdown",format:e=>`![${e.file.name}](${e.url})`},{name:"HTML",format:e=>`<img src="${e.url}" alt="${e.file.name}" title="${e.file.name}" />`}],kt=({fileId:e,files:r})=>{const[t,n]=d.useState(we[0].name),[i,o]=d.useState();if(d.useEffect(()=>{const l=r.find(m=>m.uid===e&&m.status==="success"&&m.url);l&&o(l)},[e,r]),!i)return null;const c=()=>{const l=we.find(m=>m.name===t);return l?l.format(i):null};return x("div",{className:"card tw-mt-4",children:[f("div",{className:"card-header",children:f("ul",{className:"nav nav-pills card-header-pills",children:we.map(l=>f("li",{className:"nav-item tw-cursor-pointer",children:f("div",{className:ke("nav-link",{active:t===l.name}),onClick:()=>n(l.name),children:l.name})},l.name))})}),f("div",{className:"card-body",children:f("p",{className:"text-muted",children:c()})})]})},Ct=()=>x("div",{className:"ts-wrapper form-select single full has-items input-hidden",children:[x("div",{className:"ts-control",children:[f("div",{"data-value":"1",className:"item","data-ts-item":"",children:"Chuck Tesla"}),f("input",{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":"select-users-ts-dropdown",id:"select-users-ts-control",placeholder:"Select a date",type:"select-one","aria-activedescendant":"select-users-opt-1"})]}),f("div",{className:"dropdown-menu ts-dropdown single",children:f("div",{role:"listbox",tabIndex:-1,className:"ts-dropdown-content",id:"select-users-ts-dropdown",children:f("div",{"data-selectable":"","data-value":"1",className:"dropdown-item selected active",role:"option",id:"select-users-opt-1","aria-selected":"true",children:"Chuck Tesla"})})})]}),nr=1024*1024*5,St=()=>{const[e,r]=d.useState([]),[t,n]=d.useState(),{getRootProps:i,getInputProps:o,isDragActive:c}=gr({accept:{"image/*":[]},maxSize:nr,onDrop:p=>{r([...p.map(E=>({uid:Ft(),file:E,status:"waiting",preview:URL.createObjectURL(E)})),...e])}}),l=p=>{p.stopPropagation()},m=p=>{p.stopPropagation(),r([])},u=p=>r(E=>E.filter(k=>k.uid!==p)),y=async p=>{const E=e.find(A=>A.uid===p),k=A=>{e.find(S=>S.uid===p)&&r(S=>S.map(R=>R.uid===p?{...R,...A}:R))};if(E)try{k({status:"uploading"});const A=await Fr(E.file,_=>{k({percent:_})});k({status:"success",response:A,url:A.data.url})}catch(A){k({error:A,status:"error"})}};return f("div",{className:"page-body",children:x("div",{className:"container-xl",children:[f("div",{className:"card",children:x("div",{className:"card-body",children:[x("div",{className:"tw-flex tw-items-center tw-justify-between",children:[x("div",{className:"card-title",children:[f("h3",{children:"Image Upload"}),x("span",{className:"card-subtitle !tw-ml-0",children:["最大可上传 ",vr(nr)," ","的图片，允许同时上传 3 张。本站已托管 27 张图片。"]})]}),f("div",{className:"tw-w-44",children:f(Ct,{})})]}),x("div",{...i({className:ke("dropzone hover:tw-border-primary tw-relative",{"dz-drag-hover":c})}),children:[f(or,{onClick:m,className:"tw-absolute tw-right-4 tw-cursor-pointer"}),f("input",{...o()}),x("div",{className:"dz-default dz-message",children:[f("div",{className:"tw-mb-2",children:f(Or,{size:65,className:"hover:tw-text-primary",onClick:l})}),x("button",{className:"dz-button",type:"button",children:["拖拽文件到这里，支持多文件同时上传",f("br",{}),"点击上面的图标上传全部已选择文件"]})]}),f("div",{onClick:p=>p.stopPropagation(),children:e.map(p=>f(Ot,{uploadFile:p,onRemove:u,onUpload:y,onClick:()=>n(p.uid)},p.uid))})]})]})}),f(kt,{fileId:t,files:e})]})})};export{St as default};
